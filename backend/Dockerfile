# Use uma imagem base oficial e leve do Python
FROM python:3.11-slim

# Define o diret√≥rio de trabalho dentro do container
WORKDIR /app

# Otimiza√ß√£o para que os logs do Python apare√ßam imediatamente
ENV PYTHONUNBUFFERED 1

# ==================================================
# üëá CORRE√á√ÉO AQUI üëá
# Como o build agora come√ßa de dentro da pasta "backend",
# os caminhos de c√≥pia n√£o precisam mais do prefixo "backend/".
# ==================================================

# Copia o arquivo de requisitos para dentro do container
COPY requirements.txt .

# Instala as depend√™ncias do backend
RUN pip install --no-cache-dir -r requirements.txt

# Copia todo o c√≥digo da pasta atual (que agora √© a 'backend') para o container
COPY . /app

# Exp√µe a porta em que a aplica√ß√£o vai rodar
EXPOSE 8080

# Define o comando para iniciar o servidor Uvicorn quando o container iniciar
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8080"]